http:
  routers:
    keycloak:
      rule: "Host(`auth.his-test`)"
      entryPoints:
        - web
      service: keycloak
    app1:
      rule: "Host(`app1.his-test`)"
      entryPoints:
        - web
      service: app1-service
      middlewares:
        - forward-auth
    app2:
      rule: "Host(`app2.his-test`)"
      entryPoints:
        - web
      service: app2-service
      middlewares:
        - forward-auth
  services:
    keycloak:
      loadBalancer:
        servers:
          - url: "http://keycloak:8080"
    app1-service:
      loadBalancer:
        servers:
          - url: "http://host.docker.internal:9797"
    app2-service:
      loadBalancer:
        servers:
          - url: "http://host.docker.internal:9798"
  middlewares:
    forward-auth:
      forwardAuth:
        address: "http://forward-auth:4181"
        trustForwardHeader: true
        authResponseHeaders:
          - X-Forwarded-User
